<!DOCTYPE html>
<html>
<head>
<title>Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

<h2>Admin Dashboard</h2>
<div id="profiles"></div>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyAhrYtSAdorLMYgBIPeEnXk2nFDG_M65Wc",
  authDomain: "zara-muslim-nikah.firebaseapp.com",
  databaseURL: "https://zara-muslim-nikah-default-rtdb.firebaseio.com",
  projectId: "zara-muslim-nikah"
});

const auth=firebase.auth();
const db=firebase.database();
const adminEmail="ngogrant454@gmail.com";

auth.onAuthStateChanged(user=>{
 if(!user || user.email!==adminEmail){
   window.location="index.html";
 }
});

db.ref("users").orderByChild("status").equalTo("pending")
.on("value",snap=>{
 const div=document.getElementById("profiles");
 div.innerHTML="";
 snap.forEach(child=>{
   const data=child.val();
   div.innerHTML+=`
     <div>
       <p>${data.email}</p>
       <img src="${data.photo}" width="100">
       <button onclick="approve('${child.key}')">Approve</button>
     </div>
   `;
 });
});

function approve(id){
 db.ref("users/"+id).update({status:"approved"});
 alert("Approved");
}
</script>

</body>
</html>
